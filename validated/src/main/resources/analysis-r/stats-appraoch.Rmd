---
title: "Stats approach"
author: "Tom Dalton"
date: "08/09/2017"
output: pdf_document
---

This documents details the approach taken to verify the genalogical populations that we create.

For efficency we have produced five contingency tables which are each concerned with one of the input distrbtions efffecting genalogical structure.

Lets load these in:

```{r}
path = paste("/Users/tsd4/OneDrive/cs/PhD/code/population-model/validated/src/main",
                "/resources/results/review/20170908-120243:448/tables/", sep = "")

data.death = read.csv(paste(path, "death-CT.csv", sep = ""), sep = ',', header = T)
data.obirth = read.csv(paste(path, "ob-CT.csv", sep = ""), sep = ',', header = T)
data.mbirth = read.csv(paste(path, "mb-CT.csv", sep = ""), sep = ',', header = T)
data.partner = read.csv(paste(path, "part-CT.csv", sep = ""), sep = ',', header = T)
data.sep = read.csv(paste(path, "sep-CT.csv", sep = ""), sep = ',', header = T)
```

Column abbriviations:

* NPCIAP - Number of previous children in any partnership
* CIY - Children in year (Yes/No)
* NCIY - Number of children in year
* NPA - New partners age
* NCIP - Number of children in partnership

These tables are as follows (data will be cleaned later):
```{r}
head(data.death, 2)
head(data.obirth, 2)
head(data.mbirth, 2)
head(data.partner, 2)
head(data.sep, 2)
```

# Death Analysis

```{r}
# Standardise the data
data.death$freq <- round(data.death$freq)
data.death <- data.death[which(data.death$freq != 0), ]
data.death <- data.death[which(data.death$Date >= 1855) , ]
data.death <- data.death[which(data.death$Date < 2015) , ]

# Analysis
library("MASS")
model = loglm(freq ~ Date + Sex + Age + Died + Sex:Age + Sex:Died + Age:Died
              + Sex:Age:Died, data = data.death)
model
```

